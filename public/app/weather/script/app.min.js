class $loader{constructor(){this.item=[],this.index=0}async start(){if(this.index<this.item.length){let e=this.item[this.index];if("script"==e.type){let t=document.createElement("script");t.src=e.path,t.onload=()=>{this.next()},document.body.appendChild(t)}else if("style"==e.type){let a=document.createElement("link");a.href=e.path,a.type="text/css",a.rel="stylesheet",a.media="screen",a.onload=()=>{this.next()},document.head.appendChild(a)}else if("request"==e.type)await this.next(await Ly.Http.Get(e.path));else if("function"==e.type)e.perform();else if("image"==e.type){let i=new Image;i.src=e.path,i.onload=()=>{this.next(e.path)}}}else this.oncomplete()}async next(e=null){void 0!==this.item[this.index].onload&&this.item[this.index].onload(e),this.onupdate(this.item[this.index]),this.index++,await this.start()}onupdate(e){}oncomplete(){}}const LoaderText=document.querySelector(".app-loader > label"),LoaderProgress=document.querySelector(".app-progress"),Loader=new $loader;Loader.item=[{path:"/public/app/weather/style/app.css",type:"style"},{path:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css",type:"style"},{path:"https://cdnjs.cloudflare.com/ajax/libs/weather-icons/2.0.12/css/weather-icons.min.css",type:"style"},{path:"https://cdnjs.cloudflare.com/ajax/libs/weather-icons/2.0.12/css/weather-icons-wind.min.css",type:"style"},{path:"https://canvasjs.com/assets/script/canvasjs.min.js",type:"script"},{path:"https://code.jquery.com/jquery-3.2.1.min.js",type:"script"},{path:"https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.5.0/semantic.min.css",type:"style"},{path:"https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.5.0/semantic.min.js",type:"script"},{path:"/public/library/ly/ly.css",type:"style"},{path:"/public/library/ly/ly.min.js",type:"script"},{path:"/public/app/weather/template/app.html",type:"request",onload:function(e){Ly.Element(".app").AppendHtml(e)}},{path:"/public/app/weather/template/app.navigation.html",type:"request",onload:function(e){Ly.Element(".app-weather").AppendHtml(e)}},{type:"function",perform:function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(async e=>{let t,a=await Ly.Http.Get(`https://api.open-meteo.com/v1/forecast?latitude=${e.coords.latitude}&longitude=${e.coords.longitude}&hourly=temperature_2m&timezone=auto&current_weather=true`);null!==a&&(Weather.Data=JSON.parse(a),Loader.next())},async()=>{alert("GPS not found");let e=await Ly.Http.Get("https://api.open-meteo.com/v1/forecast?latitude=23.25&longitude=77.375&hourly=temperature_2m&timezone=auto&current_weather=true");null!==e&&(Weather.Data=JSON.parse(e),Loader.next())}):alert("Unable to get location")}},],Loader.onupdate=function(){let e=Math.floor((this.index+1)/this.item.length*100);LoaderText.innerText=`Loading ${e}%`,LoaderProgress.style.width=`${e}%`},Loader.oncomplete=function(){setTimeout(()=>{Ly.Animate(".app-loader",{from:{opacity:1},to:{opacity:0},complete:function(e){Ly.Element(e).Style({display:"none"})}})},5),Weather.Init()},Loader.start();const Weather={};Weather.Data={},Weather.WMOCode={0:{icon:"wi-day-sunny",image:"/public/image/pexels-skitterphoto-3768.jpg"},1:{icon:"wi-day-sunny",image:"/public/image/pexels-skitterphoto-3768.jpg"},2:{icon:"wi-day-cloudy",image:"/public/image/pexels-magda-ehlers-2114014.jpg"},3:{icon:"wi-cloudy",image:"/public/image/pexels-magda-ehlers-2114014.jpg"},45:{icon:"wi-fog",image:"/public/image/pexels-johannes-plenio-1146709.jpg"},48:{icon:"wi-fog",image:"/public/image/pexels-johannes-plenio-1146709.jpg"},51:{icon:"wi-sprinkle",image:"/public/image/pexels-hiếu-ho\xe0ng-641584.jpg"},53:{icon:"wi-showers",image:"/public/image/pexels-nina-mace-photography-1523548.jpg"},55:{icon:"wi-sleet",image:"/public/image/pexels-peter-fazekas-1089455.jpg"},56:{icon:"wi-showers",image:"/public/image/pexels-hiếu-ho\xe0ng-641584.jpg"},57:{icon:"wi-sleet",image:"/public/image/pexels-nina-mace-photography-1523548.jpg"},61:{icon:"wi-rain",image:"/public/image/pexels-revac-films-photography-325676.jpg"},63:{icon:"wi-rain-mix",image:"/public/image/pexels-revac-films-photography-325676.jpg"},65:{icon:"wi-rain-wind",image:"/public/image/pexels-revac-films-photography-325676.jpg"},66:{icon:"wi-rain",image:"/public/image/pexels-revac-films-photography-325676.jpg"},67:{icon:"wi-rain-wind",image:"/public/image/pexels-revac-films-photography-325676.jpg"},71:{icon:"wi-snow",image:"/public/image/pexels-simon-berger-698275.jpg"},73:{icon:"wi-snow-wind",image:"/public/image/pexels-simon-berger-698275.jpg"},75:{icon:"wi-snowflake-cold",image:"/public/image/pexels-simon-berger-698275.jpg"},77:{icon:"wi-snow",image:"/public/image/pexels-simon-berger-698275.jpg"},80:{icon:"wi-rain",image:"/public/image/pexels-revac-films-photography-325676.jpg"},81:{icon:"wi-rain-mix",image:"/public/image/pexels-revac-films-photography-325676.jpg"},82:{icon:"wi-rain-wind",image:"/public/image/pexels-revac-films-photography-325676.jpg"},85:{icon:"wi-snow",image:"/public/image/pexels-simon-berger-698275.jpg"},86:{icon:"wi-snow-wind",image:"/public/image/pexels-simon-berger-698275.jpg"},95:{icon:"wi-thunderstorm",image:"/public/image/pexels-andre-furtado-1162251.jpg"},96:{icon:"wi-thunderstorm",image:"/public/image/pexels-andre-furtado-1162251.jpg"},99:{icon:"wi-thunderstorm",image:"/public/image/pexels-andre-furtado-1162251.jpg"}},Weather.SetIcon=function(e){let t=Weather.Data.current_weather.weathercode;void 0!==Weather.WMOCode[t]&&(Ly.Element("#WeatherIcon").AddClass(Weather.WMOCode[t].icon),Ly.Element(".app").Style({"background-image":`url(${Weather.WMOCode[t].image})`}))},Weather.SetTemparature=function(){let e=Weather.Data.current_weather.temperature;Ly.Element("#WeatherTemperature").Html(`${Math.floor(e)}&deg;C`),this.SetDate()},Weather.SetDate=function(){let e=Ly.Element("#WeatherDate"),t=Ly.Element("#WeatherTime"),a=new Date().toLocaleDateString("en-us",{weekday:"long",year:"numeric",month:"short",day:"numeric"}),i=new Date().toLocaleTimeString("en-us",{hour:"2-digit",minute:"2-digit"});setInterval(()=>{a=new Date().toLocaleDateString("en-us",{weekday:"long",year:"numeric",month:"short",day:"numeric"}),i=new Date().toLocaleTimeString("en-us",{hour:"2-digit",minute:"2-digit"}),e.Html(a),t.Html(i)},6e4),e.Html(a),t.Html(i)},Weather.GetLocation=function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(async e=>{let t,a=await Ly.Http.Get(`https://api.open-meteo.com/v1/forecast?latitude=${e.coords.latitude}&longitude=${e.coords.longitude}&hourly=temperature_2m&timezone=auto&current_weather=true`);null!==a&&(Weather.Data=JSON.parse(a),Weather.Init())},()=>{alert("GPS not found")}):alert("Unable to get location")},Weather.Init=function(){this.SetTemparature(),this.SetIcon(),this.Graph()},Weather.ToggleNavigation=function(){let e=Ly.Element(".app-navigation > div");"0%"==e.Style("right")?(Ly.Animate(".app-navigation > div",{from:{"background-color":"rgba(255,255,255,0.7)"},to:{"background-color":"rgba(255,255,255,0)"}}),setTimeout(()=>{e.Style({right:"-100%"})},150)):(e.Style({right:"0%"}),setTimeout(()=>{Ly.Animate(".app-navigation > div",{from:{"background-color":"rgba(255,255,255,0)"},to:{"background-color":"rgba(255,255,255,0.7)"}})},150))},Weather.Graph=function(){let e=Weather.Data.hourly.time,t=Weather.Data.hourly.temperature_2m,a=[],i=0,o=!0;for(;o;)if(void 0!==e[i]){let n=new Date(e[i]).toLocaleDateString("en-us",{weekday:"short",day:"2-digit"});a.push({label:n,y:Math.floor(t[i])}),i+=24}else o=!1;let r={animationEnabled:!0,backgroundColor:"transparent",toolTip:{fontColor:"black"},axisX:{tickColor:"black",lineColor:"black",fontColor:"black"},axisY:{gridColor:"transparent",labelFontSize:15,tickColor:"black",lineColor:"black",fontColor:"black"}};new CanvasJS.Chart("WeatherDailyCanvas",Object.assign(r,{data:[{color:"rgba(0,0,0,0.3)",type:"area",dataPoints:a}]})).render();let l=Weather.Data.hourly.time,p=Weather.Data.hourly.temperature_2m,s=[];for(var c=0;c<=24;c+=2){let m=new Date(l[c]).toLocaleTimeString("en-us",{hour:"2-digit",hour12:!0});s.push({label:m,y:Math.floor(p[c])})}new CanvasJS.Chart("WeatherHourlyCanvas",Object.assign(r,{data:[{color:"rgba(0,0,0,0.3)",type:"area",dataPoints:s}]})).render()};